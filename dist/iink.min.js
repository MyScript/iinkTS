!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((e="undefined"!=typeof globalThis?globalThis:e||self).iink={})}(this,(function(e){"use strict";const i={protocol:"WEBSOCKET",scheme:"https",host:"cloud.myscript.com",applicationKey:"",hmacKey:"",useWindowLocation:!1,websocket:{pingEnabled:!0,pingDelay:3e4,maxPingLostCount:10,autoReconnect:!0,maxRetryCount:2,fileChunkSize:3e5}},t={type:"TEXT",alwaysConnected:!0,replaceMimeTypes:!1,lang:"en_US",gesture:{enable:!0},export:{"image-resolution":300,jiix:{"bounding-box":!1,strokes:!1,text:{chars:!1,words:!0}}},renderer:{debug:{"draw-text-boxes":!1,"draw-image-boxes":!1}},math:{mimeTypes:["application/x-latex"],solver:{enable:!0,"fractional-part-digits":3,"decimal-separator":".","rounding-mode":"half up","angle-unit":"deg"},margin:{bottom:10,left:15,right:15,top:10},eraser:{"erase-precisely":!1},"undo-redo":{mode:"stroke"}},text:{guides:{enable:!0},mimeTypes:["text/plain"],margin:{top:20,left:10,right:10,bottom:10},eraser:{"erase-precisely":!1}},diagram:{mimeTypes:["application/vnd.myscript.jiix"],eraser:{"erase-precisely":!1}},rawContent:{mimeTypes:["application/vnd.myscript.jiix"],recognition:{text:!0,shape:!1},eraser:{"erase-precisely":!1}}},n={listenerOptions:{capture:!1,passive:!0},xyFloatPrecision:0,timestampFloatPrecision:0},o={minHeight:100,minWidth:100,smartGuide:{enable:!1,fadeOut:{enable:!1,duration:1e4}}},r={exportContent:"QUIET_PERIOD",exportContentDelay:1e3,resizeTriggerDelay:10},s={processDelay:10};class Configuration{constructor(e){this.events=JSON.parse(JSON.stringify(s)),this.grabber=JSON.parse(JSON.stringify(n)),this.recognition=JSON.parse(JSON.stringify(t)),this.rendering=JSON.parse(JSON.stringify(o)),this.server=JSON.parse(JSON.stringify(i)),this.triggers=JSON.parse(JSON.stringify(r)),this.overrideDefaultConfiguration(e)}mergeDeep(e,...i){const isObject=e=>e&&"object"==typeof e&&!Array.isArray(e);if(!i.length)return e;const t=i.shift();if(isObject(e)&&isObject(t))for(const i in t)isObject(t[i])?(e[i]||Object.assign(e,{[i]:{}}),this.mergeDeep(e[i],t[i])):Object.assign(e,{[i]:t[i]});return this.mergeDeep(e,...i)}overrideDefaultConfiguration(e){var a,l,c,p,d,g,u;e&&(this.events=this.mergeDeep({},s,null==e?void 0:e.events),this.grabber=this.mergeDeep({},n,null==e?void 0:e.grabber),this.recognition=this.mergeDeep({},t,null==e?void 0:e.recognition),this.rendering=this.mergeDeep({},o,null==e?void 0:e.rendering),this.server=this.mergeDeep({},i,null==e?void 0:e.server),this.triggers=this.mergeDeep({},r,null==e?void 0:e.triggers),(null===(a=this.server)||void 0===a?void 0:a.useWindowLocation)&&(this.server.scheme=window.location.protocol.indexOf("s")>-1?"https":"http",this.server.host=window.location.host),this.recognition.replaceMimeTypes&&(this.recognition.text.mimeTypes=["application/vnd.myscript.jiix"],this.recognition.math.mimeTypes=(null===(c=null===(l=null==e?void 0:e.recognition)||void 0===l?void 0:l.math)||void 0===c?void 0:c.mimeTypes)||["application/vnd.myscript.jiix"],this.recognition.diagram.mimeTypes=(null===(d=null===(p=null==e?void 0:e.recognition)||void 0===p?void 0:p.diagram)||void 0===d?void 0:d.mimeTypes)||["application/vnd.myscript.jiix"],this.recognition.rawContent.mimeTypes=(null===(u=null===(g=null==e?void 0:e.recognition)||void 0===g?void 0:g.rawContent)||void 0===u?void 0:u.mimeTypes)||["application/vnd.myscript.jiix"])),"WEBSOCKET"===this.server.protocol&&"TEXT"===this.recognition.type?this.rendering.smartGuide.enable&&!this.recognition.text.mimeTypes.includes("application/vnd.myscript.jiix")&&this.recognition.text.mimeTypes.push("application/vnd.myscript.jiix"):this.rendering.smartGuide.enable=!1}}function __awaiter(e,i,t,n){return new(t||(t=Promise))((function(o,r){function fulfilled(e){try{step(n.next(e))}catch(e){r(e)}}function rejected(e){try{step(n.throw(e))}catch(e){r(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof t?e:new t((function(i){i(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,i||[])).next())}))}e.Editor=class Editor{constructor(e,i){this.wrapperHTML=e,this.wrapperHTML.classList.add((null==i?void 0:i.globalClassCss)||"ms-editor"),this._configuration=new Configuration(null==i?void 0:i.configuration)}get configuration(){return this._configuration}set configuration(e){this._configuration?this._configuration.overrideDefaultConfiguration(e):this._configuration=new Configuration(e)}},e.getAvailableLanguageList=function getAvailableLanguageList(e){var i,t;return __awaiter(this,void 0,void 0,(function*(){if((null===(i=null==e?void 0:e.server)||void 0===i?void 0:i.scheme)&&(null===(t=null==e?void 0:e.server)||void 0===t?void 0:t.host)){const i=e.server;return(yield fetch(`${i.scheme}://${i.host}/api/v4.0/iink/availableLanguageList`)).json()}return Promise.reject("Cannot get languages ! Please check your server configuration!")}))},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=iink.min.js.map
